<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Europresse Parser</title>

    <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.js"
            crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>

    <link id="favicon" rel="icon" type="image/x-icon" href={{ host + '/favicon.ico' }}>

    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&display=swap">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    {#    <link href="{{ host + '/static/dropzone.min.css' }}" rel="stylesheet">#}
    {#    <link href="{{ host + '/static/basic.min.css' }}" rel="stylesheet">#}
    <link href="{{ host + '/static/new_wui.css' }}" rel="stylesheet">

    {#    <script src="{{ host + '/static/dropzone.min.js' }}"></script>#}
    <script type="module" src="{{ host + '/static/new_wui.js' }}"></script>
    <script type="module" src="{{ host + '/static/popover.js' }}"></script>
    {#    <script type="module" src="{{ host + '/static/dropzone_handler.js' }}"></script>#}
</head>

<body>


<header>
    <div class="topnav">
        <h1 aria-label="EuroParser">
            <span class="left-hand title">
                Eur
            </span>
            <span class="logo-title">
                <img src="{{ host + '/static/logo.svg' }}" alt="CERES">
            </span>
            <span class="right-hand title">
                Parser
            </span>
        </h1>
        <div class="separator"></div>
        <span class="description">Convertissez des fichiers html Europresse vers d'autres formats</span>
    </div>
</header>

<form method="post" enctype="multipart/form-data" action="/convert" id="myForm">
    <dialog class="modal" id="formats_params_modal" onclick="closeThis(this)">
        <div class="modal-content" id="format_params_main_content">
            <div class="modal-header">
                <h5 class="modal-title">Paramètres avancés</h5>
                <button type="button" class="close" id="formats_params_close" onclick="closeParentModal(this)">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div>
                    <input type="checkbox" id="filter_keywords" name="params" value="false" class="params-input"> <label
                        for="filter_keywords">Filter les mots clés n'apparaissant que dans un seul article</label>
                </div>
                <div>
                    <input type="number" id="minimal_support" name="params" value="1" min="1" class="params-input"
                           placeholder="Support minimal pour les mots clés">
                    <label for="minimal_support">
                        Support minimal par défaut global
                    </label>
                </div>
                <div>
                    <input type="number" id="minimal_support_kw" name="params" value="1" min="1" class="params-input"
                           placeholder="Support minimal pour les mots clés">
                    <label for="minimal_support_kw">
                        Support minimal pour les mots clés
                    </label>
                </div>
                <div>
                    <input type="number" id="minimal_support_journals" name="params" value="1" min="1"
                           class="params-input" placeholder="Support minimal pour les mots clés">
                    <label for="minimal_support_journals">
                        Support minimal pour les journaux
                    </label>
                </div>
                <div>
                    <input type="number" id="minimal_support_authors" name="params" value="1" min="1"
                           class="params-input" placeholder="Support minimal pour les mots clés">
                    <label for="minimal_support_authors">
                        Support minimal pour les auteurs
                    </label>
                </div>
                <div>
                    <input type="number" id="minimal_support_dates" name="params" value="1" min="1" class="params-input"
                           placeholder="Support minimal pour les mots clés">
                    <label for="minimal_support_dates">
                        Support minimal pour les mois
                    </label>
                </div>

                <div class="see-help" onclick="seeHelp('keywords_help')">
                    <i class="bi bi-question-circle"></i>
                    <span>À quoi sert le filtre de mots clés ?</span>
                </div>

                <div class="see-help" onclick="seeHelp('support_help')">
                    <i class="bi bi-question-circle"></i>
                    <span>Qu'est-ce que le support minimal ?</span>
                </div>

            </div>
        </div>

        <div class="modal-content help-container" id="keywords_help">
            <h3>À quoi sert le filtre de mots clés ?</h3>
            <img alt="placeholder" src="https://placehold.co/600x400" class="modal-image">
            <br>
            <div class="lorem-ipsum">
                enuiezngezjmgeljhkgezljklnlkj
            </div>
            <img alt="placeholder" src="https://placehold.co/600x400" class="modal-image">
            <br>
            <div class="lorem-ipsum">
                enuiezngezjmgeljhkgezljklnlkj
            </div>
        </div>

        <div class="modal-content help-container" id="support_help">
            <h3>Qu'est-ce que le support minimal ?</h3>
            <img alt="placeholder" src="https://placehold.co/600x400" class="modal-image">
            <br>
            <img alt="placeholder" src="https://placehold.co/600x400" class="modal-image">
            <br>
            <div class="lorem-ipsum">
                enuiezngezjmgeljhkgezljklnlkj
            </div>
        </div>
    </dialog>
    <main>
        <div class="rectangle">
            <div class="number">
                0
            </div>
            <div class="card-title secondary">
                Récupérez vos fichiers html sur Europresse
            </div>
            <div class="card-body main">
                Pour plus d’informations sur comment les télécharger,
                consultez le
                <a href="https://ceres.sorbonne-universite.fr/outils/europarser/" class="pretty-link">
                    tutoriel CERES
                </a>
            </div>
        </div>

        <div class="rectangle">
            <div class="number">
                1
            </div>
            <div class="card-title secondary">
                Téléchargez les fichiers que vous souhaitez transformer
            </div>
            <div class="card-body main">
                <div class="dropzone-container" id="dropzone-continer">
                    <div style="display: none;" id="state">0</div>
                    <div class="dropzone mb-3" id="files-dropzone">
                        <div class="dz-message" data-dz-message>
                            <div class="icon">
                                <i class="bi bi-cloud-arrow-up"></i>
                            </div>
                            <div class="text">
                                <h4>Déposez vos fichiers ici</h4>
                                <h5>ou cliquez pour les sélectionner</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="rectangle">
            <div class="params-button-container">
                <div class="number">
                    2
                </div>
                <div class="params">
                    <i class="params bi bi-sliders params-button tooltip-trigger" id="formats_params_button"
                       src="{{ host + '/static/sliders.svg' }}"
                       describedby="tooltip" aria-label="formats-params-tooltip"
                       alt="Paramètres"
                       onclick="modal"
                    ></i>
                    <div class="tooltip-content left" role="tooltip" id="formats-params-tooltip"
                         data-popper-placement="left">
                        Paramètres avancés
                    </div>
                </div>

            </div>
            <div class="card-title secondary">
                Choisissez les formats de sortie
            </div>
            <div class="formats-container">
                <div class="label-and-popover">
                    <div class="label tooltip-trigger" alt="Iramuteq-tooltip"
                         aria-describedby="tooltip" aria-label="Iramuteq-tooltip">
                        <label class="switch btn btn-primary" for="iramuteq">Iramuteq
                            <input type="checkbox" name="formats" value="iramuteq" id="iramuteq">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="Iramuteq-tooltip" data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            Le format Iramuteq est un format de fichier texte brut qui peut être utilisé pour l'analyse
                            de texte avec le logiciel <a href="http://www.iramuteq.org/" target="_blank"
                                                         class="pretty-link">Iramuteq</a>
                            ainsi que d'autres logiciels compatibles comme
                            <a href="https://hyperbase.unice.fr//" target="_blank" class="pretty-link">Hyperbase</a>.
                        </p>
                    </div>
                </div>
                <div class="label-and-popover">
                    <div class="label tooltip-trigger" alt="TXM-tooltip"
                         aria-describedby="tooltip" aria-label="TXM-tooltip">
                        <label class="switch btn btn-primary" for="txm">TXM
                            <input type="checkbox" name="formats" value="txm" id="txm">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="TXM-tooltip" data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            TXM est un format de fichier texte brut qui peut être utilisé pour l'analyse de texte avec
                            le
                            logiciel <a href="http://textometrie.ens-lyon.fr/?lang=fr" target="_blank"
                                        class="pretty-link">TXM</a>.
                        </p>
                    </div>
                </div>
                <div class="label-and-popover">
                    <div class="label tooltip-trigger" alt="JSON-tooltip"
                         aria-describedby="tooltip" aria-label="JSON-tooltip">
                        <label class="switch btn btn-primary" for="json">JSON
                            <input type="checkbox" name="formats" value="json" id="json">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="JSON-tooltip" data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            Le format JSON est un format de fichier texte brut qui peut être utilisé pour l'analyse de
                            texte avec des logiciels compatibles.
                        </p>
                    </div>
                </div>
                <div class="label-and-popover">
                    <div class="label tooltip-trigger" alt="CSV-tooltip"
                         aria-describedby="tooltip" aria-label="CSV-tooltip">
                        <label class="switch btn btn-primary" for="csv">CSV
                            <input type="checkbox" name="formats" value="csv" id="csv">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="CSV-tooltip" data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            Le format CSV est un format de fichier texte brut qui peut être utilisé pour l'analyse de
                            texte avec des logiciels compatibles.
                        </p>
                    </div>
                </div>
                <div class="label-and-popover">
                    <div class="label tooltip-trigger" alt="Excel-tooltip"
                         aria-describedby="tooltip" aria-label="Excel-tooltip">
                        <label class="switch btn btn-primary" for="excel">Excel (xls)
                            <input type="checkbox" name="formats" value="excel" id="excel">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="Excel-tooltip" data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            Le format Excel est un format de fichier tableur qui peut être utilisé pour l'analyse de
                            texte
                            avec des logiciels compatibles.
                        </p>
                    </div>
                </div>
                <div class="label-and-popover">
                    <div class="label tooltip-trigger" alt="Markdown-tooltip"
                         aria-describedby="tooltip" aria-label="Markdown-tooltip">
                        <label class="switch btn btn-primary" for="markdown">Markdown
                            <input type="checkbox" name="formats" value="markdown" id="markdown">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="Markdown-tooltip" data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            Le format Markdown est un format de fichier texte brut qui peut être utilisé pour l'analyse
                            de texte avec des logiciels compatibles.
                        </p>
                    </div>
                </div>
            </div>
            <br>
            <br>
            <div class="card-title secondary">
                et/ou les statistiques à générer
            </div>
            <div class="formats-container">
                <div class="label-and-popover">
                    <div class="label tooltip-trigger" alt="stats-tooltip"
                         aria-describedby="tooltip" aria-label="stats-tooltip">
                        <label class="switch btn btn-primary" for="stats">Statistiques
                            <input type="checkbox" name="stats" value="stats" id="stats">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="stats-tooltip" data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            Les statistiques sont des données textuelles qui peuvent être utilisées pour l'analyse de
                            texte avec des logiciels compatibles.
                        </p>
                    </div>
                </div>
                <div class="label-and-popover">
                    <div class="label tooltip-trigger" alt="processed-tooltip"
                         aria-describedby="tooltip" aria-label="processed-tooltip">
                        <label class="switch btn btn-primary" for="processedStats">Statistiques traitées
                            <input type="checkbox" name="stats" value="processedStats" id="processedStats">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="processed-tooltip" data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            Les statistiques traitées sont des données textuelles qui peuvent être utilisées pour
                            l'analyse de texte avec des logiciels compatibles.
                        </p>
                    </div>
                </div>
                <div class="label-and-popover" style="display: none"> <!-- TODO: change to block when added output-->
                    <div class="label tooltip-trigger" alt="static-graphs-tooltip"
                         aria-describedby="tooltip" aria-label="static-graphs-tooltip">
                        <label class="switch btn btn-primary" for="staticGraphs">Graphiques statiques
                            <input type="checkbox" name="stats" value="staticGraphs" id="staticGraphs">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="static-graphs-tooltip"
                         data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            Les graphiques statiques sont des données textuelles qui peuvent être utilisées pour
                            l'analyse de texte avec des logiciels compatibles.
                        </p>
                    </div>
                </div>
                <div class="label-and-popover">
                    <div class="label tooltip-trigger" alt="dynamic-graphs-tooltip"
                         aria-describedby="tooltip" aria-label="dynamic-graphs-tooltip">
                        <label class="switch btn btn-primary" for="dynamicGraphs">Graphiques interactifs
                            <input type="checkbox" name="stats" value="dynamicGraphs" id="dynamicGraphs">
                        </label>
                    </div>
                    <div class="tooltip-content" role="tooltip" id="dynamic-graphs-tooltip"
                         data-popper-placement="right">
                        <div class="arrow" data-popper-arrow></div>
                        <p>
                            Les graphiques interactifs sont des données textuelles qui peuvent être utilisées pour
                            l'analyse de texte avec des logiciels compatibles.
                        </p>
                    </div>

                </div>
            </div>
        </div>

        <div class="rectangle">
            <div class="number">
                3
            </div>
            <div class="card-title secondary">
                Téléchargez les fichiers transformés sur votre ordinateur
            </div>
            <div id="conversion-container" class="card-body main fourth-rectangle-container">
                <div id="submit-all" type="submit" class="fourth-rectangle-button"
                     onclick="submitForm()">
                    <div class="content-image">
                        <img src="{{ host + '/static/convertir.svg' }}" alt="Convertir" class="content-image idle">
                        <img src="{{ host + '/static/convertir_blanc.svg' }}" alt="Convertir"
                             class="content-image active">
                    </div>
                    <div class="content-text">
                        Convertir
                    </div>
                </div>
            </div>
            <div id="download-container" class="card-body main fourth-rectangle-container" style="display: none;">
                <a id="download" href="" download class="download-link">
                    <div class="fourth-rectangle-button">
                        <div class="content-image">
                            <i class="bi bi-cloud-download content-image" aria-hidden="true"></i>
                        </div>
                        <div>
                            Télécharger
                        </div>
                    </div>
                </a>
            </div>
            <div id="loader-container" class="card-body main fourth-rectangle-container" style="display: none;">
                <div class="fourth-rectangle-button loading">
                    <div class="content-image">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                    <div>
                        Conversion...
                    </div>
                </div>
            </div>
        </div>
    </main>
</form>

<footer>
    <div class="footer">
        <div class="footer-help">
            <p>Vous rencontrez un problème ? </p>
            <a href="mailto:lettres-ceres@sorbonne-universite.fr" class="mail">
                Écrivez-nous à l’adresse : <span class="actual-mail">lettres-ceres@sorbonne-universite.fr</span>
            </a>
        </div>
        <div class="footer-credits">
            <a href="https://ceres.sorbonne-universite.fr/outils/" class="pretty-link big-boi" target="_blank">
                Outils du CERES
                <img src="{{ host + '/static/logo.svg' }}" alt="CERES" class="logo">
            </a>
        </div>
    </div>
</footer>
</body>
</html>
